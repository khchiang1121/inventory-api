# ğŸ› ï¸ é–‹ç™¼æ—¥èªŒ

## âœ… é€²åº¦ç´€éŒ„

### ğŸ” èªè­‰æ©Ÿåˆ¶
- å¯¦ä½œåŸºæœ¬ Token èªè­‰åŠŸèƒ½ï¼ˆ`CustomTokenAuthentication`ï¼‰  
  â±ï¸ ç´„ 1 å°æ™‚  
- èªè­‰æ–¹å¼åˆ‡æ›è‡³ DRF åŸç”Ÿæ¨¡å¼ï¼š  
  â±ï¸ ç´„ 1 å°æ™‚  
  ä½¿ç”¨ï¼š
  ```python
  from rest_framework.authentication import TokenAuthentication
  ```
- å¾ŒçºŒè¨ˆåŠƒåˆ‡æ›è‡³æ›´å®‰å…¨çš„ [Knox èªè­‰å¥—ä»¶](https://github.com/jazzband/django-rest-knox)ï¼ˆè¦‹ TODOï¼‰

### æˆæ¬Šæ©Ÿåˆ¶
- å¯¦ä½œ Object-level æ¬Šé™
  â±ï¸ ç´„ 6 å°æ™‚  
  https://blog.csdn.net/weixin_42134789/article/details/105963583
---

### ğŸ” æ¶æ§‹é‡æ§‹èˆ‡æ¡†æ¶åˆ‡æ›
- å°ˆæ¡ˆç”± **Django Ninja** æ”¹ç‚º **Django REST Framework (DRF)**  
  â±ï¸ ç´„ 8 å°æ™‚  
- èª¿æ•´å°ˆæ¡ˆçµæ§‹è‡³ DRF æ¨è–¦æ ¼å¼ï¼ˆapp in projectï¼‰  
  â±ï¸ ç´„ 5 å°æ™‚

---

### ğŸ“„ API æ–‡ä»¶ç”Ÿæˆ
- ä½¿ç”¨ `drf-spectacular` æ’°å¯« OpenAPI æ–‡ä»¶  
  â±ï¸ ç´„ 2 å°æ™‚  
  åŠŸèƒ½åŒ…å«ï¼š
  - ç”Ÿæˆ Redoc æ–‡ä»¶
  - ç”Ÿæˆ Swagger æ–‡ä»¶
  - åˆ‡æ›ç‚ºé›¢ç·šæ¨¡å¼å±•ç¤ºæ–‡ä»¶  
  - APIæ”¯æ´è¼¸å…¥token
  åƒè€ƒè³‡æ–™ï¼šhttps://www.cnblogs.com/liuyanhang/p/18523423
---

### ğŸ§© API ç‰ˆæœ¬æ§åˆ¶
- ç ”ç©¶ä¸¦å¯¦ä½œ API ç‰ˆæœ¬åˆ‡æ›æ©Ÿåˆ¶  
  â±ï¸ ç´„ 3 å°æ™‚  
  åƒè€ƒè³‡æ–™ï¼š[APIç‰ˆæœ¬åˆ‡æ› HackMD](https://hackmd.io/xBnP6u46S42A_aHC7WZelw)

---

### ğŸ–¼ï¸ éœæ…‹æª”æ¡ˆèˆ‡å‰ç«¯è³‡æºæ”¯æ´
- å®Œæˆ Production / Development çš„éœæ…‹æª”æ¡ˆè¨­å®š  
  â±ï¸ ç´„ 1 å°æ™‚  
  å·¥å…·ï¼š`whitenoise`  
  åƒè€ƒï¼š
  - [éœæ…‹æª”æ¡ˆè¨­å®š HackMD](https://hackmd.io/EddWhYqBTs-RDeb1BoVnJA)
  - [23. whitenoise](https://ithelp.ithome.com.tw/articles/10242574)
  - [å­¸æœƒGunicorn åªéœ€è¦çœ‹é€™ç¯‡]https://ithelp.ithome.com.tw/articles/10342996
  - [Gunicornå’ŒUvicorn
](https://zhuanlan.zhihu.com/p/605971741)
- å¢åŠ  `favicon.ico` æ”¯æ´ï¼Œä¸¦ç”¢ç”Ÿåœ–æ¨™  
  â±ï¸ ç´„ 1 å°æ™‚

### Bug
- ä¿®å¾©inconsistent results with an unordered object_list
  â±ï¸ ç´„ 0.5 å°æ™‚
  ```
    site-packages/rest_framework/pagination.py:207: UnorderedObjectListWarning: Pagination may yield inconsistent results with an unordered object_list: <class 'inventory_api.api.models.Maintainer'> QuerySet.
      paginator = self.django_paginator_class(queryset, page_size)
    [29/Mar/2025 18:52:50] "GET //api/v1/maintainers/ HTTP/1.1" 200 2349
    ```
    ![image](https://hackmd.io/_uploads/Sy5TWTrakx.png)
    ![image](https://hackmd.io/_uploads/B1HCZpH6kg.png)

### è³‡æ–™åº«
- æ›´æ”¹ç¶­è­·è€…ç‚ºdjangoå…§å»ºä½¿ç”¨è€…
  â±ï¸ ç´„ 2 å°æ™‚
  https://hackmd.io/20GR-Ew0TQOC9wwma7PA-A
  ![image](https://hackmd.io/_uploads/Hyd0hu86Jl.png)

---
## ğŸ”— å¸¸ç”¨é–‹ç™¼ä»‹é¢é€£çµ

| åŠŸèƒ½            | URL                                |
|-----------------|-------------------------------------|
| **pgAdmin**     | [http://localhost:5050/browser/](http://localhost:5050/browser/) |
| **Swagger UI**  | [http://localhost:8001/api/v1/docs/](http://localhost:8001/api/v1/docs/) |
| **Django Admin**| [http://localhost:8001/admin](http://localhost:8001/admin) |





ğŸ›  Changelog
[Unreleased] / [vX.Y.Z] â€“ 2025-03-31
- Fixed: ä¿®æ­£ç•¶ API URL çµå°¾æœªåŠ  / æ™‚ï¼ŒPATCH/PUT/DELETE è«‹æ±‚è¢«é‡å°å‘ç‚º GET çš„å•é¡Œ
    - é—œé–‰ APPEND_SLASH è¨­å®šä»¥é¿å…è‡ªå‹•è£œæ–œç·š
    - è¨­å®š DRF router ä½¿ç”¨ trailing_slash=Falseï¼Œä½¿è·¯ç”±æ›´ç¬¦åˆ RESTful API ç¿’æ…£
    - æ”¹å–„è·¨ç«¯è«‹æ±‚çš„ç©©å®šæ€§ï¼Œé˜²æ­¢éé æœŸçš„é‡å°è¡Œç‚º



åŠ ä¸ŠPRPO brand model network æ©Ÿæˆ¿ç®¡ç†è¡¨





---
## ğŸ“ TODO
- èªè­‰æ©Ÿåˆ¶æ”¹ç‚ºä½¿ç”¨ Knoxï¼š  
  ğŸ”— [Knox Token èªè­‰ GitHub](https://github.com/jazzband/django-rest-knox)
- æ¬Šé™ç®¡ç†è¦per object Object-level æ¬Šé™:
  https://django-guardian.readthedocs.io/en/stable/#
- è½‰æ›åˆ°Object-level æ¬Šé™æ™‚ï¼Œé‚„æ˜¯è¦ä¿ç•™ç¶­è­·è€…æ¬„ä½ï¼Œå› ç‚ºä¸€å€‹ç”¢å“å¯èƒ½æœ‰ä¸€å€‹ç¶­è­·è€…ï¼Œå¯æ˜¯æœƒæœ‰å¾ˆå¤šäººå¯ä»¥ç·¨è¼¯ï¼Œé€™äº›å¯ä»¥ç·¨è¼¯çš„äººï¼Œä¸ä¸€å®šæ”¶å±¬æ–¼ç¶­è­·è€…
https://github.com/sehmaschine/django-grappelli