# VirtFlow API 說明書

## 專案概述
VirtFlow 是一個用於管理虛擬化資源的系統，主要功能包括虛擬機管理、裸機管理、Kubernetes集群管理、服務網格管理等。系統採用多租戶架構，並支援資源配額管理。

## API 分類

### 1. 維護者管理 (Maintainer)

#### 1.1 維護者基本操作
- **建立維護者**
  - 用途：新增系統維護者帳號
  - 必填欄位：名稱、帳號、狀態
  - 選填欄位：電子郵件
  - 說明：用於系統管理員建立新的維護者帳號，維護者可以是個人或團隊

- **更新維護者資訊**
  - 用途：修改維護者資料
  - 可更新欄位：名稱、帳號、電子郵件、狀態
  - 說明：允許更新維護者的基本資訊，所有欄位都是選填的

- **查詢維護者**
  - 用途：獲取維護者詳細資訊
  - 回傳：包含ID、名稱、帳號、電子郵件、狀態、建立時間等
  - 說明：用於查看維護者的完整資訊

- **刪除維護者**
  - 用途：刪除維護者帳號
  - 說明：用於移除不再需要的維護者帳號

### 2. 維護者群組管理 (Maintainer Group)

#### 2.1 群組基本操作
- **建立維護者群組**
  - 用途：建立維護者團隊
  - 必填欄位：群組名稱、群組管理員UUID、狀態
  - 選填欄位：描述
  - 說明：用於組織多個維護者形成團隊，便於統一管理

- **更新群組資訊**
  - 用途：修改群組設定
  - 可更新欄位：名稱、管理員、描述、狀態
  - 說明：允許更新群組的基本資訊

- **查詢群組**
  - 用途：獲取群組詳細資訊
  - 回傳：包含群組ID、名稱、管理員資訊、描述、狀態等
  - 說明：用於查看群組的完整資訊

- **刪除群組**
  - 用途：刪除維護者群組
  - 說明：用於移除不再需要的維護者群組

### 3. 資源管理 (Resource)

#### 3.1 裸機管理 (Baremetal)
- **建立裸機**
  - 用途：新增實體伺服器
  - 必填欄位：名稱、序號、區域、廠房、階段、資料中心、機房、機架、狀態、資源規格
  - 選填欄位：單位位置
  - 說明：用於註冊新的實體伺服器，包含詳細的硬體規格和位置資訊

- **更新裸機資訊**
  - 用途：修改裸機配置
  - 可更新欄位：所有基本資訊和資源規格
  - 說明：允許更新裸機的配置資訊

- **查詢裸機**
  - 用途：獲取裸機詳細資訊
  - 回傳：包含完整的裸機資訊，包括關聯的機架和群組資訊
  - 說明：用於查看裸機的完整資訊

- **刪除裸機**
  - 用途：刪除裸機
  - 說明：用於移除不再需要的裸機

#### 3.2 虛擬機管理 (Virtual Machine)
- **建立虛擬機**
  - 用途：建立新的虛擬機
  - 必填欄位：名稱、租戶、裸機、規格、類型、狀態
  - 選填欄位：K8s集群
  - 說明：使用VMScheduler自動調度虛擬機到合適的裸機上

- **更新虛擬機**
  - 用途：修改虛擬機配置
  - 可更新欄位：名稱、租戶、裸機、規格、類型、狀態等
  - 說明：允許更新虛擬機的配置資訊

- **查詢虛擬機**
  - 用途：獲取虛擬機詳細資訊
  - 回傳：包含完整的虛擬機資訊，包括關聯的租戶、裸機、規格等
  - 說明：用於查看虛擬機的完整資訊

- **刪除虛擬機**
  - 用途：刪除虛擬機
  - 說明：用於移除不再需要的虛擬機

### 4. Kubernetes 集群管理

#### 4.1 集群基本操作
- **建立K8s集群**
  - 用途：建立新的Kubernetes集群
  - 必填欄位：名稱、版本、租戶、排程模式、狀態
  - 選填欄位：描述
  - 說明：用於建立新的Kubernetes集群，支援不同的排程模式

- **更新集群資訊**
  - 用途：修改集群配置
  - 可更新欄位：名稱、版本、租戶、排程模式、描述、狀態
  - 說明：允許更新集群的配置資訊

- **查詢集群**
  - 用途：獲取集群詳細資訊
  - 回傳：包含完整的集群資訊，包括關聯的租戶資訊
  - 說明：用於查看集群的完整資訊

- **刪除集群**
  - 用途：刪除K8s集群
  - 說明：用於移除不再需要的Kubernetes集群

### 5. 服務網格管理 (Service Mesh)

#### 5.1 服務網格基本操作
- **建立服務網格**
  - 用途：建立新的服務網格
  - 必填欄位：名稱、類型、狀態
  - 選填欄位：描述
  - 說明：用於建立服務網格，支援不同類型的服務網格實現

- **更新服務網格**
  - 用途：修改服務網格配置
  - 可更新欄位：名稱、類型、描述、狀態
  - 說明：允許更新服務網格的配置資訊

- **查詢服務網格**
  - 用途：獲取服務網格詳細資訊
  - 回傳：包含完整的服務網格資訊
  - 說明：用於查看服務網格的完整資訊

- **刪除服務網格**
  - 用途：刪除服務網格
  - 說明：用於移除不再需要的服務網格

### 6. 資源配額管理

#### 6.1 租戶配額管理
- **設定租戶配額**
  - 用途：設定租戶在特定裸機群組中的資源配額
  - 必填欄位：群組、租戶、CPU配額百分比、記憶體配額、儲存空間配額
  - 說明：用於控制租戶可以使用的資源上限

- **更新租戶配額**
  - 用途：修改租戶的資源配額
  - 可更新欄位：所有配額相關欄位
  - 說明：允許調整租戶的資源使用限制

- **查詢租戶配額**
  - 用途：獲取租戶配額詳細資訊
  - 回傳：包含完整的配額資訊
  - 說明：用於查看租戶的資源使用限制

## 重要說明

1. **資源調度**
   - 系統使用VMScheduler進行虛擬機的智能調度
   - 調度時會考慮裸機的可用資源和租戶配額限制
   - 支援不同類型的虛擬機（控制平面、工作節點、管理節點等）

2. **多租戶支援**
   - 系統支援多租戶架構
   - 每個租戶有獨立的資源配額
   - 租戶可以管理自己的虛擬機和K8s集群

3. **維護者權限**
   - 維護者可以是個人或群組
   - 支援資源與維護者的關聯
   - 可以靈活配置不同類型的維護者

4. **資源追蹤**
   - 系統追蹤所有資源的使用情況
   - 包含CPU、記憶體、儲存空間的使用量
   - 支援資源配額的即時監控
